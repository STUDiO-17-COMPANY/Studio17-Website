import React, { useEffect, useRef, useState } from 'react';
import { 
  MapPin, 
  CheckCircle2, 
  Menu, 
  X, 
  ChevronDown, 
  Phone, 
  Instagram, 
  Facebook, 
  ArrowRight,
  BedDouble,
  Building,
  Maximize2,
  Car,
  CigaretteOff,
  Users,
  Calendar,
  Mail,
  MessageCircle,
  ChevronLeft,
  ChevronRight,
  Star,
  Quote,
  ParkingCircle,
  Sun,
  Flower2,
  Map as MapIcon,
  Accessibility,
  PenSquare
} from 'lucide-react';

// --- DADOS ---

const ROOMS_DATA = {
  cavaleiros: [
    {
      id: 'cav_ind',
      title: "Quarto Individual",
      description: "Este quarto climatizado inclui uma televisão por satélite e uma casa de banho privativa.",
      size: "11m²",
      capacity: "1 Pessoa",
      beds: "1 Cama de Solteiro",
      basePrice: 45,
      amenities: ["Acesso por Elevador", "Ar condicionado", "Minibar", "Roupa de cama e Roupeiro", "Secretária", "TV satélite", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484794/aeaa7d_d06fb7ba42e94e5b9e04e19cc8ee0899_mv2_das8zx.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484808/aeaa7d_730212fce5e540178fff87b0db527757_mv2_wsyhlv.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484824/aeaa7d_f75980dabc0b47e69f5c4ee76c21a5e9_mv2_ptv6dg.avif"
      ]
    },
    {
      id: 'cav_twin',
      title: "Quarto Twin",
      description: "Espaço confortável com duas camas, ideal para colegas de viagem ou amigos.",
      size: "14m²",
      capacity: "2 Pessoas",
      beds: "2 Camas de Solteiro",
      basePrice: 55,
      amenities: ["Acesso por Elevador", "Ar condicionado", "Minibar", "Roupa de cama e Roupeiro", "Secretária", "TV satélite", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485047/aeaa7d_fe368277f6dc4da693edce45d869c5ec_mv2_nuyxlb.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485128/aeaa7d_bdb92f2f82a54fb182e05b77cc924b2b_mv2_ecf6ak.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485134/aeaa7d_e6a67e217e664c76916dcb187bcba1f2_mv2_enhz7v.avif"
      ]
    },
    {
      id: 'cav_double',
      title: "Quarto Duplo",
      description: "Quarto climatizado com cama de casal, perfeito para estadias a dois.",
      size: "12m²",
      capacity: "2 Pessoas",
      beds: "1 Cama de Casal",
      basePrice: 55,
      amenities: ["Acesso por Elevador", "Ar condicionado", "Minibar", "Roupa de cama e Roupeiro", "Secretária", "TV satélite", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484249/aeaa7d_b32e7b052f994875bec599a37617767c_mv2_q5de88.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484238/aeaa7d_1b0b438509dc493e860ab935db23e2d6_mv2_itohh8.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767484258/aeaa7d_f6f0dd6164bd48689b3ef36ba3bb6342_mv2_bhq6oa.avif"
      ]
    },
    {
      id: 'cav_sup_double',
      title: "Quarto Duplo Superior",
      description: "Conforto superior com todas as comodidades essenciais para uma estadia relaxante.",
      size: "12m²",
      capacity: "2 Pessoas",
      beds: "1 Cama de Casal",
      basePrice: 70,
      amenities: ["Acesso por Elevador", "Ar condicionado", "Minibar", "Roupa de cama e Roupeiro", "Secretária", "TV satélite", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485424/aeaa7d_56edeb4405324ae1a837f01848952fc9_mv2_b0lnmb.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485445/aeaa7d_456d1edceac1474abd3c0ef49c78fba6_mv2_q3pbxi.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485499/aeaa7d_498776d467da43d7b7a7a047254c88b7_mv2_gnuylp.avif"
      ]
    },
    {
      id: 'cav_suite',
      title: "Suíte Júnior",
      description: "Espaçosa suite decorada com cores suaves e vistas sobre Tomar.",
      size: "22m²",
      capacity: "4 Pessoas",
      beds: "2 Solteiro + 1 Sofá-Cama",
      basePrice: 90,
      amenities: ["Acesso por Elevador", "Ar condicionado", "Minibar", "Roupa de cama e Roupeiro", "Entrada privada", "TV satélite", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485637/aeaa7d_191a1582916940b0b735733d9e3e3650_mv2_fd0s5b.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485642/aeaa7d_1f4489d6e42948768cfefb2328cb68d5_mv2_rn4nij.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767485650/aeaa7d_5298365414f64ce0b0307b110ae5cefc_mv2_uonpaq.avif"
      ]
    }
  ],
  uniao: [
    {
      id: 'uni_ind',
      title: "Quarto Individual",
      description: "Aconchegante e histórico, ideal para o viajante a solo.",
      size: null,
      capacity: "1 Pessoa",
      beds: "1 Cama de Casal",
      basePrice: 40,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767552838/aeaa7d_e11cb6d192924487a01ed6204e967a37_mv2_qxaayn.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767552843/aeaa7d_aca749d267d046159b141c39316289ec_mv2_qutjdn.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767552863/aeaa7d_fa9ab16d177a4e7bb7603a85fa61006f_mv2_iihae2.avif"
      ]
    },
    {
      id: 'uni_double',
      title: "Quarto Duplo",
      description: "Quarto clássico com tetos altos e mobiliário antigo. Charme do século XIX.",
      size: null,
      capacity: "3 Pessoas (máx)",
      beds: "1 Cama de Casal + Possível Extra",
      basePrice: 60,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767553169/aeaa7d_0334c471af164eb4ae30b2e035f0b6b1_mv2_gangpv.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767553221/aeaa7d_dd21c243d8164258ab44a73cef53e258_mv2_j6oft1.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767553226/aeaa7d_19d1d016084a41f98c2c1e56a193ad1c_mv2_dpatgx.avif"
      ]
    },
    {
      id: 'uni_passarinhos',
      title: "Quarto Duplo 'Passarinhos'",
      description: "Decoração temática única que evoca a natureza e tranquilidade.",
      size: null,
      capacity: "2 Pessoas (+ Extra)",
      beds: "1 Cama de Casal + Possível Extra",
      basePrice: 65,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767568767/aeaa7d_bc79b2d752a941f6aee127ea43d1bfba_mv2_zrlgo5.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767568775/aeaa7d_98f983c8cb0f4ec189408665dc488791_mv2_hfgpmz.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767568781/aeaa7d_b2e73abc770144a09acadf2c39240637_mv2_lndhfi.avif"
      ]
    },
    {
      id: 'uni_twin',
      title: "Quarto Twin",
      description: "Espaço partilhado com o conforto de camas separadas.",
      size: null,
      capacity: "3 Pessoas (máx)",
      beds: "2 Camas de Solteiro + Possível Extra",
      basePrice: 60,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767569444/aeaa7d_23baa56638a244d4adec203dcc67ed1a_mv2_iz62ds.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767569452/aeaa7d_14757eaaef4648a9b679cd4eb02ace03_mv2_qrzaai.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767569460/aeaa7d_d6e6a5e845e34e578f3232f41362cdfb_mv2_p4usrm.avif"
      ]
    },
    {
      id: 'uni_floresta',
      title: "Quarto Twin 'Floresta'",
      description: "Ambiente sereno inspirado na Mata dos Sete Montes.",
      size: null,
      capacity: "3 Pessoas (máx)",
      beds: "2 Camas de Solteiro + Possível Extra",
      basePrice: 65,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647433/aeaa7d_24abfe0885b04be4b4b275d8664f6035_mv2_ihspyi.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647438/aeaa7d_fc19c161984a41569bcc314ade643a61_mv2_fbtm3z.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647447/aeaa7d_4cb7f3b6849648f28a61106fae53fe89_mv2_nhyzzq.avif"
      ]
    },
    {
      id: 'uni_triple',
      title: "Quarto Triplo",
      description: "Espaço amplo ideal para pequenos grupos ou famílias.",
      size: null,
      capacity: "3 Pessoas",
      beds: "3 Camas de Solteiro",
      basePrice: 85,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647582/aeaa7d_70f23a1153744a9cb523ccaa1dbc9283_mv2_rq9yed.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647584/aeaa7d_44bec253c5714fd38b998f464cacec8d_mv2_lhiqb4.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647591/aeaa7d_30cba50965e440608bf756f545dff320_mv2_wasr0r.avif"
      ]
    },
    {
      id: 'uni_rosa',
      title: "Quarto Triplo Superior 'Rosa'",
      description: "O nosso quarto mais distinto, com decoração romântica e espaço generoso.",
      size: null,
      capacity: "4 Pessoas (máx)",
      beds: "1 Casal, 1 Solteiro + Possível Extra",
      basePrice: 95,
      amenities: ["Ar condicionado (a pedido)", "Acesso por Escadas", "Roupa de cama e Roupeiro", "TV de ecrã plano", "Wi-Fi gratuito"],
      bathroom: "Privativa com banheira ou duche, produtos de higiene, toalhas, secador.",
      parking: "Público próximo (custos aplicáveis).",
      images: [
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647665/aeaa7d_5c520c7fe3c741568dcfebcf3a164b6c_mv2_lpdvng.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647670/aeaa7d_64e6f83e7c8449d69699aa10504befac_mv2_hswdfx.avif",
        "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767647675/aeaa7d_d07a5922f3974e67bbeda3ca4540e692_mv2_dytqtz.avif"
      ]
    }
  ]
};

const MAP_POINTS = [
  { id: 1, title: "Convento de Cristo", type: "Monumento", desc: "Património Mundial da UNESCO. Castelo templário.", dist: "15 min a pé", coords: "top-[10%] left-[40%]" },
  { id: 2, title: "Mata dos Sete Montes", type: "Natureza", desc: "Pulmão verde da cidade, ideal para passeios.", dist: "10 min a pé", coords: "top-[30%] left-[35%]" },
  { id: 3, title: "União Guest House", type: "Hotel", desc: "Rua Serpa Pinto, 94. Charme histórico.", dist: "Sede", coords: "top-[50%] left-[50%]", isHotel: true },
  { id: 7, title: "Hotel Cavaleiros", type: "Hotel", desc: "Rua Alexandre Herculano, 7. Conforto moderno.", dist: "1 min a pé", coords: "top-[51%] left-[49%]", isHotel: true },
  { id: 4, title: "Sinagoga de Tomar", type: "Cultura", desc: "A mais antiga de Portugal, na antiga judiaria.", dist: "3 min a pé", coords: "top-[55%] left-[60%]" },
  { id: 5, title: "Parque do Mouchão", type: "Lazer", desc: "Jardim junto ao rio Nabão com a famosa Roda.", dist: "5 min a pé", coords: "top-[65%] left-[70%]" },
  { id: 6, title: "Estação de Comboios", type: "Transporte", desc: "Ligação direta a Lisboa e Porto.", dist: "10 min a pé", coords: "top-[80%] left-[20%]" },
];

const PARKING_DATA = [
  { name: "Parque do Estádio", type: "Gratuito", dist: "8 min a pé", desc: "Amplo e seguro. A melhor opção para estadias longas." },
  { name: "Parque da Várzea", type: "Pago", dist: "5 min a pé", desc: "Conveniente, junto ao mercado. Gratuito aos Domingos." },
  { name: "Zona do Mercado", type: "Pago", dist: "4 min a pé", desc: "Estacionamento de rua. Atenção aos parquímetros." },
];

// Updated Reviews with more authentic Portuguese content
const REVIEWS_DATA = [
  { name: "Maria Ferreira", country: "Portugal", rating: 5, text: "Excelente localização mesmo no centro de Tomar. O staff foi incansável e a limpeza estava impecável. Recomendo vivamente!" },
  { name: "João Santos", country: "Portugal", rating: 5, text: "Fiquei no quarto 'Passarinhos' e adorei a decoração. É um sítio com muita alma. A relação qualidade-preço é fantástica para a zona." },
  { name: "Pedro Oliveira", country: "Portugal", rating: 4, text: "Muito prático para quem viaja em trabalho. O elevador no Hotel Cavaleiros dá muito jeito e o quarto era silencioso e confortável." },
];

// --- Utility: Reveal on Scroll ---
const RevealOnScroll = ({ children, className = "", delay = 0 }) => {
  const [isVisible, setIsVisible] = useState(false);
  const ref = useRef(null);

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true);
          observer.unobserve(entry.target);
        }
      },
      { threshold: 0.1 }
    );
    if (ref.current) observer.observe(ref.current);
    return () => { if (ref.current) observer.unobserve(ref.current); };
  }, []);

  return (
    <div
      ref={ref}
      className={`transition-all duration-1000 ease-out transform ${
        isVisible ? "opacity-100 translate-y-0" : "opacity-0 translate-y-10"
      } ${className}`}
      style={{ transitionDelay: `${delay}ms` }}
    >
      {children}
    </div>
  );
};

// --- Calendar Component ---
const SimpleCalendar = ({ basePrice, onSelectDate }) => {
  const [selectedDate, setSelectedDate] = useState(null);
  const days = Array.from({ length: 30 }, (_, i) => i + 1);
  const today = new Date().getDate();

  const handleDateClick = (day) => {
    if (day < today) return;
    setSelectedDate(day);
    const isWeekend = (day % 7 === 6 || day % 7 === 0);
    const finalPrice = isWeekend ? basePrice + 10 : basePrice;
    onSelectDate(day, finalPrice);
  };

  return (
    <div className="bg-stone-50 p-4 rounded-sm border border-stone-200">
      <div className="flex justify-between items-center mb-4">
        <span className="font-bold text-stone-800">Janeiro 2026</span>
        <Calendar size={18} className="text-stone-500"/>
      </div>
      <div className="grid grid-cols-7 gap-2 text-center text-sm mb-2 text-stone-500 font-medium">
        <span>S</span><span>T</span><span>Q</span><span>Q</span><span>S</span><span>S</span><span>D</span>
      </div>
      <div className="grid grid-cols-7 gap-2">
        {Array(3).fill(null).map((_, i) => <div key={`empty-${i}`} />)} 
        {days.map(day => (
          <button
            key={day}
            disabled={day < today}
            onClick={() => handleDateClick(day)}
            className={`
              p-2 rounded-full text-xs font-medium transition-all
              ${day < today ? 'text-stone-300 cursor-not-allowed' : 'hover:bg-stone-200 text-stone-700'}
              ${selectedDate === day ? 'bg-stone-800 text-white hover:bg-stone-900 shadow-md transform scale-110' : ''}
            `}
          >
            {day}
          </button>
        ))}
      </div>
    </div>
  );
};

// --- Modal Component for Room Details ---
const RoomModal = ({ room, onClose, accentColor }) => {
  const [activeImageIndex, setActiveImageIndex] = useState(0);
  const [selectedDateData, setSelectedDateData] = useState(null);
  const [showContacts, setShowContacts] = useState(false);

  if (!room) return null;

  const handleDateSelection = (day, price) => {
    setSelectedDateData({ day, price });
    setShowContacts(false);
  };

  const nextImage = () => setActiveImageIndex((prev) => (prev + 1) % room.images.length);
  const prevImage = () => setActiveImageIndex((prev) => (prev - 1 + room.images.length) % room.images.length);

  return (
    <div className="fixed inset-0 z-[60] flex items-center justify-center p-4">
      <div className="absolute inset-0 bg-black/60 backdrop-blur-sm" onClick={onClose}></div>
      <div className="bg-white w-full max-w-4xl max-h-[95vh] overflow-y-auto rounded-sm shadow-2xl relative animate-in fade-in zoom-in duration-300 flex flex-col md:flex-row">
        
        {/* Close Button Mobile */}
        <button onClick={onClose} className="absolute top-4 right-4 z-20 bg-black/50 p-2 rounded-full hover:bg-black/70 text-white md:hidden"><X size={20} /></button>

        {/* Left Side: Image Gallery */}
        <div className="w-full md:w-1/2 relative bg-stone-100 h-64 md:h-auto">
           <img src={room.images[activeImageIndex]} alt={room.title} className="w-full h-full object-cover transition-all duration-300" />
           {room.images.length > 1 && (
             <>
               <button onClick={prevImage} className="absolute left-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full backdrop-blur-sm"><ChevronLeft size={20}/></button>
               <button onClick={nextImage} className="absolute right-4 top-1/2 -translate-y-1/2 bg-black/30 hover:bg-black/50 text-white p-2 rounded-full backdrop-blur-sm"><ChevronRight size={20}/></button>
               <div className="absolute bottom-4 left-0 w-full flex justify-center gap-2">
                 {room.images.map((_, idx) => (
                   <div key={idx} className={`w-2 h-2 rounded-full transition-all ${idx === activeImageIndex ? 'bg-white scale-125' : 'bg-white/50'}`} />
                 ))}
               </div>
             </>
           )}
        </div>

        {/* Right Side: Details & Booking */}
        <div className="w-full md:w-1/2 p-6 md:p-8 overflow-y-auto">
          <div className="flex justify-between items-start mb-4">
            <div>
              <h3 className="text-3xl font-serif text-stone-900">{room.title}</h3>
              <p className="text-stone-500 text-sm mt-1">{room.description}</p>
            </div>
            <button onClick={onClose} className="hidden md:block text-stone-400 hover:text-stone-800"><X size={24}/></button>
          </div>
          
          <div className="flex gap-4 text-xs font-medium text-stone-600 mb-6 border-b border-stone-100 pb-4">
             <span className="flex items-center bg-stone-50 px-2 py-1 rounded"><Users size={14} className="mr-1"/> {room.capacity}</span>
             <span className="flex items-center bg-stone-50 px-2 py-1 rounded"><BedDouble size={14} className="mr-1"/> {room.beds}</span>
             {room.size && <span className="flex items-center bg-stone-50 px-2 py-1 rounded"><Maximize2 size={14} className="mr-1"/> {room.size}</span>}
          </div>

          <div className="space-y-6">
            <div>
              <h4 className={`font-serif text-base mb-2 ${accentColor.replace('bg-', 'text-')}`}>Comodidades</h4>
              <ul className="grid grid-cols-2 gap-2">
                {room.amenities.slice(0, 8).map((item, idx) => (
                  <li key={idx} className="flex items-start text-xs text-stone-600"><CheckCircle2 className="w-3 h-3 mr-1.5 mt-0.5 text-stone-400 flex-shrink-0" />{item}</li>
                ))}
              </ul>
            </div>

            <div>
              <h4 className="font-serif text-lg mb-3 flex items-center gap-2"><Calendar className="w-5 h-5" /> Disponibilidade & Preços</h4>
              <SimpleCalendar basePrice={room.basePrice} onSelectDate={handleDateSelection} />
              
              {selectedDateData && (
                <div className="mt-4 p-4 bg-stone-50 border border-green-200 rounded-sm animate-in slide-in-from-top-2">
                  <div className="flex justify-between items-center mb-2">
                    <span className="text-sm text-stone-600">Preço para dia {selectedDateData.day} Jan:</span>
                    <span className="text-xl font-bold text-stone-900">€{selectedDateData.price}</span>
                  </div>
                  <p className="text-xs text-stone-500 mb-3">*Valor indicativo sem pequeno-almoço.</p>
                  
                  {!showContacts ? (
                    <button onClick={() => setShowContacts(true)} className={`w-full py-3 text-white font-medium rounded-sm shadow-md transition-all ${accentColor}`}>Reservar esta Data</button>
                  ) : (
                    <div className="space-y-3 animate-in fade-in">
                      <p className="text-sm font-medium text-stone-900">Contacte-nos para confirmar:</p>
                      <div className="grid grid-cols-1 gap-2">
                        <a href="tel:+351249323161" className="flex items-center justify-center gap-2 py-2 bg-stone-900 text-white rounded-sm text-sm hover:bg-stone-800"><Phone size={16} /> Ligar (+351 249 323 161)</a>
                        <a href={`mailto:reservas@uniaoguesthouse.com?subject=Reserva ${room.title} - Dia ${selectedDateData.day} Jan`} className="flex items-center justify-center gap-2 py-2 border border-stone-300 text-stone-700 rounded-sm text-sm hover:bg-stone-50"><Mail size={16} /> Enviar Email</a>
                        <button onClick={() => alert("Abriria WhatsApp")} className="flex items-center justify-center gap-2 py-2 bg-[#25D366] text-white rounded-sm text-sm hover:opacity-90"><MessageCircle size={16} /> WhatsApp</button>
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

// --- Room Card ---
const RoomCard = ({ room, accentColor, onOpenDetails }) => (
  <div className="room-card group bg-white rounded-sm overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 border border-stone-100 h-full flex flex-col relative">
    <div className="absolute top-4 left-4 z-10 bg-black/70 text-white text-[10px] px-2 py-1 uppercase tracking-wider rounded-sm backdrop-blur-sm">
        Sem Pequeno-Almoço
    </div>
    <div className="relative h-64 overflow-hidden cursor-pointer" onClick={() => onOpenDetails(room)}>
      <img src={room.images[0]} alt={room.title} className="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
      <div className="absolute inset-0 bg-black/10 group-hover:bg-black/0 transition-colors"></div>
    </div>
    <div className="p-6 flex flex-col flex-grow">
      <div className="flex justify-between items-start mb-2">
         <h3 className="font-serif text-2xl text-stone-900 leading-tight cursor-pointer hover:underline" onClick={() => onOpenDetails(room)}>{room.title}</h3>
      </div>
      <p className="text-xs text-stone-500 mb-4 line-clamp-2">{room.description}</p>
      
      <div className="grid grid-cols-2 gap-2 mb-6 text-stone-600">
        <div className="flex items-center text-xs bg-stone-50 p-1.5 rounded"><Users className="w-3 h-3 mr-1.5" /> {room.capacity}</div>
        <div className="flex items-center text-xs bg-stone-50 p-1.5 rounded"><BedDouble className="w-3 h-3 mr-1.5" /> {room.beds.split(' ')[0]} {room.beds.split(' ')[1]}</div>
        {room.size && <div className="flex items-center text-xs bg-stone-50 p-1.5 rounded"><Maximize2 className="w-3 h-3 mr-1.5" /> {room.size}</div>}
      </div>

      <div className="mt-auto space-y-2">
        <button onClick={() => onOpenDetails(room)} className={`w-full py-2.5 border border-stone-200 text-stone-600 font-medium text-xs uppercase tracking-wider hover:border-stone-400 hover:text-stone-900 transition-colors flex items-center justify-center`}><Maximize2 className="w-3 h-3 mr-2" /> Ver Detalhes</button>
        <button onClick={() => onOpenDetails(room)} className={`w-full py-3 text-white font-medium text-sm uppercase tracking-wider transition-colors shadow-sm ${accentColor}`}>Verificar Preços</button>
      </div>
    </div>
  </div>
);

// --- New Combined Location & Parking Section with LIST VIEW ---
const LocationParkingSection = () => {
  return (
    <div className="grid md:grid-cols-2 gap-12 items-start">
      {/* Location / Points of Interest - Replacing Map Visual with List */}
      <div className="bg-white rounded-sm shadow-sm border border-stone-100 overflow-hidden flex flex-col h-full">
        <div className="p-6 bg-stone-50 border-b border-stone-100">
           <h3 className="font-serif text-2xl text-stone-900 flex items-center gap-2">
             <MapIcon className="text-red-900" /> No Coração de Tomar
           </h3>
           <p className="text-sm text-stone-500 mt-1">Distâncias a pé a partir da nossa porta.</p>
        </div>
        
        <div className="p-6 flex-grow flex flex-col gap-3">
           {MAP_POINTS.map((point) => (
             <a 
               key={point.id} 
               href={`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(point.title + " Tomar")}`}
               target="_blank" 
               rel="noreferrer"
               className={`
                 group flex items-center p-4 rounded-sm border transition-all duration-300
                 ${point.isHotel 
                   ? 'bg-red-50 border-red-100 hover:border-red-300' 
                   : 'bg-white border-stone-100 hover:border-stone-300 hover:shadow-md'}
               `}
             >
                <div className={`
                  w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 mr-4 transition-colors
                  ${point.isHotel ? 'bg-red-900 text-white' : 'bg-stone-100 text-stone-500 group-hover:bg-blue-900 group-hover:text-white'}
                `}>
                   {point.isHotel ? <Star size={20} fill="currentColor"/> : <MapPin size={20} />}
                </div>
                
                <div className="flex-grow">
                   <div className="flex justify-between items-center">
                     <span className={`font-bold text-sm ${point.isHotel ? 'text-red-900' : 'text-stone-800'}`}>{point.title}</span>
                     <span className="text-xs font-semibold bg-stone-100 px-2 py-1 rounded text-stone-600">{point.dist}</span>
                   </div>
                   <p className="text-xs text-stone-500 mt-0.5 line-clamp-1">{point.desc}</p>
                </div>
                
                <ArrowRight size={16} className={`ml-3 opacity-0 group-hover:opacity-100 transition-opacity ${point.isHotel ? 'text-red-900' : 'text-blue-900'}`} />
             </a>
           ))}
        </div>
      </div>

      {/* Parking */}
      <div className="bg-white p-6 rounded-sm shadow-sm border border-stone-100 h-full">
        <h3 className="font-serif text-2xl mb-6 text-stone-900 flex items-center gap-2">
          <ParkingCircle className="text-blue-900" /> Onde Estacionar
        </h3>
        <p className="text-sm text-stone-500 mb-6">Estamos em zona histórica pedonal. Recomendamos estacionar antes de fazer o check-in.</p>
        <div className="space-y-4">
          {PARKING_DATA.map((park, i) => (
            <div key={i} className="flex items-start p-4 bg-stone-50 rounded-sm border border-stone-100 hover:border-stone-300 transition-colors">
              <div className="mt-1 mr-3 text-stone-400"><MapPin size={20} /></div>
              <div>
                <div className="flex items-center justify-between mb-1">
                  <h4 className="font-medium text-stone-900">{park.name}</h4>
                  <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold ${park.type === 'Gratuito' ? 'bg-green-100 text-green-700' : 'bg-orange-100 text-orange-700'}`}>{park.type}</span>
                </div>
                <p className="text-xs text-stone-500 mb-1">{park.dist}</p>
                <p className="text-xs text-stone-600">{park.desc}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

// --- Missing SocialProof Component Added Here ---
const SocialProof = () => (
  <div className="bg-stone-100 py-8 border-b border-stone-200">
    <div className="container mx-auto px-4 flex flex-wrap justify-center items-center gap-6 md:gap-12 opacity-80">
      <div className="flex items-center gap-3">
        <div className="bg-blue-900 text-white p-1.5 rounded text-base font-bold">9.2</div>
        <div className="text-xs font-semibold text-stone-700 leading-tight">
          Soberbo<br /><span className="font-normal text-stone-500">Booking.com</span>
        </div>
      </div>
      <div className="flex items-center gap-2">
        <div className="flex text-green-600 text-xs">★★★★★</div>
        <div className="text-xs font-semibold text-stone-700 leading-tight">
          Travelers' Choice<br /><span className="font-normal text-stone-500">TripAdvisor</span>
        </div>
      </div>
      <div className="flex items-center gap-2">
        <CheckCircle2 className="w-4 h-4 text-stone-500" />
        <span className="text-xs font-medium text-stone-600">Melhor Preço Garantido</span>
      </div>
    </div>
  </div>
);

// --- Reviews Section ---
const ReviewsSection = () => (
  <div className="space-y-8">
    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
        {REVIEWS_DATA.map((rev, i) => (
        <div key={i} className="bg-white p-6 rounded-sm shadow-sm border border-stone-100 flex flex-col">
            <div className="flex text-yellow-500 mb-3">
            {[...Array(rev.rating)].map((_, i) => <Star key={i} size={14} fill="currentColor" />)}
            </div>
            <Quote className="text-stone-200 mb-2 w-8 h-8" />
            <p className="text-stone-600 text-sm italic mb-4 flex-grow">"{rev.text}"</p>
            <div>
            <span className="block font-bold text-stone-900 text-sm">{rev.name}</span>
            <span className="text-xs text-stone-400">{rev.country}</span>
            </div>
        </div>
        ))}
    </div>
    
    <div className="bg-stone-50 border border-stone-200 p-8 rounded-sm text-center">
        <h3 className="font-serif text-xl mb-2 text-stone-800">Já ficou connosco?</h3>
        <p className="text-stone-500 text-sm mb-6">A sua opinião ajuda-nos a melhorar e a receber melhor quem nos visita.</p>
        <button 
            onClick={() => alert('Abrir formulário de feedback (Ex: Google Forms ou Tripadvisor)')}
            className="inline-flex items-center px-6 py-3 bg-white border border-stone-300 text-stone-800 font-medium rounded-sm hover:bg-stone-100 hover:border-stone-400 transition-all shadow-sm"
        >
            <PenSquare size={16} className="mr-2" /> Deixar o meu Feedback
        </button>
    </div>
  </div>
);


// --- Navbar ---
const Navbar = ({ activeProperty, onBookClick }) => {
  const [isOpen, setIsOpen] = useState(false);
  const [scrolled, setScrolled] = useState(false);

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const navLinks = [
    { name: 'Alojamento', href: '#rooms' },
    { name: 'Localização', href: '#location' },
    { name: 'Opiniões', href: '#reviews' },
  ];

  return (
    <nav className={`fixed top-0 left-0 w-full z-50 transition-all duration-500 ${scrolled ? 'bg-stone-50/95 backdrop-blur-md shadow-sm py-3' : 'bg-transparent py-5'}`}>
      <div className="container mx-auto px-4 md:px-6 flex justify-between items-center">
        {/* Logo Duplo */}
        <div className="flex flex-col leading-tight cursor-pointer" onClick={() => window.scrollTo(0,0)}>
          <span className={`font-serif text-xl font-bold tracking-tight transition-colors ${scrolled ? 'text-red-900' : 'text-white'}`}>
            União <span className="font-light">Guest House</span>
          </span>
          <span className={`text-[0.65rem] uppercase tracking-widest ${scrolled ? 'text-stone-500' : 'text-stone-300'}`}>
            & Hotel Cavaleiros de Cristo
          </span>
        </div>

        {/* Desktop Menu */}
        <div className="hidden md:flex items-center space-x-8">
          {navLinks.map((link) => (
            <a 
              key={link.name} 
              href={link.href} 
              className={`text-sm font-medium tracking-wide transition-colors hover:text-red-600 ${scrolled ? 'text-stone-800' : 'text-stone-100'}`}
            >
              {link.name}
            </a>
          ))}
          <button 
            onClick={onBookClick}
            className={`px-6 py-2.5 rounded-sm font-medium text-sm transition-all duration-300 transform hover:-translate-y-0.5 ${
              scrolled 
                ? 'bg-red-900 text-white hover:bg-red-800' 
                : 'bg-white text-red-900 hover:bg-stone-100'
            }`}
          >
            Reservar Agora
          </button>
        </div>

        {/* Mobile Toggle */}
        <button onClick={() => setIsOpen(!isOpen)} className={`md:hidden p-2 ${scrolled ? 'text-stone-800' : 'text-white'}`}>
          {isOpen ? <X size={24} /> : <Menu size={24} />}
        </button>
      </div>

      {/* Mobile Menu */}
      {isOpen && (
        <div className="absolute top-full left-0 w-full bg-stone-50 shadow-xl border-t border-stone-100 p-6 flex flex-col space-y-4 md:hidden">
          {navLinks.map((link) => (
            <a key={link.name} href={link.href} onClick={() => setIsOpen(false)} className="text-stone-800 text-lg font-serif">{link.name}</a>
          ))}
          <button onClick={() => { onBookClick(); setIsOpen(false); }} className="w-full bg-red-900 text-white py-3 mt-4 rounded-sm">Verificar Disponibilidade</button>
        </div>
      )}
    </nav>
  );
};

// --- Split Hero Section ---
const SplitHero = ({ activeProperty, setActiveProperty, onBookClick }) => {
  const handleExplore = (e, property) => {
    e.stopPropagation();
    setActiveProperty(property);
    const roomsSection = document.getElementById('rooms');
    if (roomsSection) { roomsSection.scrollIntoView({ behavior: 'smooth' }); }
  };

  return (
    <section className="relative h-screen w-full overflow-hidden flex flex-col md:flex-row">
      {/* Lado Esquerdo: União Guest House */}
      <div 
        className={`relative flex-1 group cursor-pointer overflow-hidden transition-all duration-700 border-r border-white/10 ${activeProperty === 'uniao' ? 'flex-[1.5]' : 'flex-1 hover:flex-[1.2]'}`}
        onClick={() => setActiveProperty('uniao')}
      >
        <div className="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors z-10" />
        {/* Updated Image: União Specific Photo */}
        <img 
          src="https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767651374/residencial-uniao-487325169_mpkelu.jpg" 
          alt="União Guest House - Exterior/Interior"
          className={`absolute inset-0 w-full h-full object-cover transition-transform duration-[10s] ${activeProperty === 'uniao' ? 'scale-110' : 'scale-100'}`}
        />
        <div className="absolute inset-0 z-20 flex flex-col justify-center items-center text-center p-6 text-white">
          <div className={`transition-all duration-500 ${activeProperty === 'uniao' ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-80'}`}>
            <span className="uppercase tracking-[0.2em] text-xs mb-2 block">Charme & História</span>
            <h2 className="font-serif text-4xl md:text-5xl lg:text-6xl font-medium mb-4">União<br/>Guest House</h2>
            <div className={`overflow-hidden transition-all duration-500 ${activeProperty === 'uniao' ? 'max-h-40 opacity-100 mt-4' : 'max-h-0 opacity-0'}`}>
              <p className="max-w-xs mx-auto text-sm md:text-base font-light mb-6">
                Um refúgio do século XIX no coração histórico.
              </p>
              <button onClick={(e) => handleExplore(e, 'uniao')} className="bg-red-900 hover:bg-red-800 text-white px-6 py-2 rounded-sm text-sm font-medium transition-colors">Explorar União</button>
            </div>
          </div>
        </div>
      </div>

      {/* Lado Direito: Hotel Cavaleiros de Cristo */}
      <div 
        className={`relative flex-1 group cursor-pointer overflow-hidden transition-all duration-700 ${activeProperty === 'cavaleiros' ? 'flex-[1.5]' : 'flex-1 hover:flex-[1.2]'}`}
        onClick={() => setActiveProperty('cavaleiros')}
      >
        <div className="absolute inset-0 bg-black/40 group-hover:bg-black/20 transition-colors z-10" />
        {/* Updated Image: Cavaleiros Specific Photo */}
        <img 
          src="https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767651426/hotel-cavaleiros-de-cristo-8770996_l1ttjp.jpg" 
          alt="Hotel Cavaleiros de Cristo - Exterior"
          className={`absolute inset-0 w-full h-full object-cover transition-transform duration-[10s] ${activeProperty === 'cavaleiros' ? 'scale-110' : 'scale-100'}`}
        />
        <div className="absolute inset-0 z-20 flex flex-col justify-center items-center text-center p-6 text-white">
          <div className={`transition-all duration-500 ${activeProperty === 'cavaleiros' ? 'translate-y-0 opacity-100' : 'translate-y-4 opacity-80'}`}>
            <span className="uppercase tracking-[0.2em] text-xs mb-2 block">Praticidade & Conforto</span>
            <h2 className="font-serif text-4xl md:text-5xl lg:text-6xl font-medium mb-4">Hotel<br/>Cavaleiros</h2>
            <div className={`overflow-hidden transition-all duration-500 ${activeProperty === 'cavaleiros' ? 'max-h-40 opacity-100 mt-4' : 'max-h-0 opacity-0'}`}>
              <p className="max-w-xs mx-auto text-sm md:text-base font-light mb-6">
                Conveniência moderna com elevador e localização central.
              </p>
              <button onClick={(e) => handleExplore(e, 'cavaleiros')} className="bg-blue-900 hover:bg-blue-800 text-white px-6 py-2 rounded-sm text-sm font-medium transition-colors">Explorar Hotel</button>
            </div>
          </div>
        </div>
      </div>
      
      <div className="absolute bottom-8 left-1/2 -translate-x-1/2 z-30 animate-bounce text-white/70 pointer-events-none">
        <ChevronDown size={28} />
      </div>
    </section>
  );
};

// --- Updated Experience Section ---
const ExperienceSection = ({ activeProperty }) => {
  const uniaoFeatures = [
    {
      title: "Charme Histórico & Azulejos",
      desc: "Um edifício do século XIX com entrada decorada por azulejos típicos azuis e brancos, tetos altos e mobiliário de estilo antigo.",
      icon: <Building className="w-6 h-6 text-red-900" />,
      image: "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767649380/uniao_guest_azulejos_uc5hwd.png",
    },
    {
      title: "Jardim & Terraço de Verão",
      desc: "Nos dias quentes, aproveite para tomar uma bebida fresca no nosso terraço ou relaxe no pátio tranquilo após explorar a cidade.",
      icon: <Flower2 className="w-6 h-6 text-red-900" />,
      image: "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767649385/uniao_guest_house_patio_cnvten.png",
    }
  ];

  const cavaleirosFeatures = [
    {
      title: "Acessibilidade com Elevador",
      desc: "Diferente da Guest House, o Hotel Cavaleiros dispõe de elevador, garantindo acesso prático e confortável a todos os pisos.",
      icon: <Accessibility className="w-6 h-6 text-blue-900" />,
      image: "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767649265/aeaa7d_c655b2115b714660843d3fada22e980a_mv2_bf5acq.avif",
    },
    {
      title: "Conforto Moderno",
      desc: "Quartos equipados com ar condicionado, minibar e todas as amenidades essenciais para uma estadia sem preocupações no centro da cidade.",
      icon: <Building className="w-6 h-6 text-blue-900" />,
      image: "https://res.cloudinary.com/ddqn9gs6f/image/upload/v1767649708/conforto_moderno_l2bjca.png",
    }
  ];

  const features = activeProperty === 'uniao' ? uniaoFeatures : cavaleirosFeatures;
  const accentColor = activeProperty === 'uniao' ? 'text-red-900' : 'text-blue-900';

  return (
    <div className="space-y-24">
      {features.map((feat, idx) => (
        <RevealOnScroll key={`${activeProperty}-${idx}`}>
          <div className={`flex flex-col ${idx % 2 === 1 ? 'lg:flex-row-reverse' : 'lg:flex-row'} items-center gap-12`}>
            <div className="w-full lg:w-1/2">
              <div className="relative aspect-[4/3] overflow-hidden rounded-sm shadow-xl">
                <img src={feat.image} alt={feat.title} className="w-full h-full object-cover transition-transform duration-700 hover:scale-105" />
              </div>
            </div>
            <div className="w-full lg:w-1/2 space-y-6">
              <div className={`w-12 h-12 ${activeProperty === 'uniao' ? 'bg-red-100' : 'bg-blue-100'} rounded-full flex items-center justify-center mb-4`}>
                {feat.icon}
              </div>
              <h3 className="font-serif text-3xl text-stone-900">{feat.title}</h3>
              <p className="text-stone-600 text-lg leading-relaxed">{feat.desc}</p>
            </div>
          </div>
        </RevealOnScroll>
      ))}
    </div>
  );
};

// --- Main Component ---
export default function TomarDualHotel() {
  const [activeProperty, setActiveProperty] = useState('uniao');
  const [selectedRoom, setSelectedRoom] = useState(null);

  const handleBookClick = () => {
    alert("Para reservas diretas, por favor use os contactos disponíveis no detalhe de cada quarto.");
  };

  return (
    <div className="font-sans text-stone-900 bg-stone-50 selection:bg-red-900 selection:text-white" style={{scrollBehavior: 'smooth'}}>
      <style>{`html { scroll-behavior: smooth; }`}</style>
      
      <Navbar activeProperty={activeProperty} onBookClick={handleBookClick} />
      
      <SplitHero 
        activeProperty={activeProperty} 
        setActiveProperty={setActiveProperty} 
        onBookClick={handleBookClick} 
      />
      
      <SocialProof />

      <div className="sticky top-16 z-40 bg-white/95 backdrop-blur border-b border-stone-200 py-4 shadow-sm">
        <div className="container mx-auto px-4 flex justify-center gap-4">
          <button 
            onClick={() => setActiveProperty('uniao')}
            className={`px-6 py-2 rounded-full text-sm font-bold transition-all ${
              activeProperty === 'uniao' 
                ? 'bg-red-900 text-white shadow-md' 
                : 'text-stone-500 hover:text-red-900 bg-stone-100'
            }`}
          >
            União Guest House
          </button>
          <button 
            onClick={() => setActiveProperty('cavaleiros')}
            className={`px-6 py-2 rounded-full text-sm font-bold transition-all ${
              activeProperty === 'cavaleiros' 
                ? 'bg-blue-900 text-white shadow-md' 
                : 'text-stone-500 hover:text-blue-900 bg-stone-100'
            }`}
          >
            Hotel Cavaleiros
          </button>
        </div>
      </div>

      <main className="min-h-screen">
        
        <section id="rooms" className="py-20 px-4 container mx-auto">
          <RevealOnScroll>
            <div className="text-center mb-16">
              <span className={`font-semibold tracking-wider text-sm uppercase ${activeProperty === 'uniao' ? 'text-red-900' : 'text-blue-900'}`}>
                {activeProperty === 'uniao' ? 'Charme Histórico' : 'Conforto Moderno'}
              </span>
              <h2 className="font-serif text-4xl mt-2 mb-4">
                {activeProperty === 'uniao' ? 'Quartos União' : 'Quartos Cavaleiros'}
              </h2>
              <p className="text-stone-600 max-w-xl mx-auto">
                {activeProperty === 'uniao' 
                  ? 'A experiência de dormir num edifício do séc. XIX. Nota: Pisos acessíveis por escadas.' 
                  : 'Praticidade total no centro da cidade, com acesso por elevador.'}
              </p>
            </div>
          </RevealOnScroll>
          
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {ROOMS_DATA[activeProperty].map((room) => (
               <RevealOnScroll key={room.id} className="h-full">
                  <RoomCard 
                    room={room} 
                    accentColor={activeProperty === 'uniao' ? 'bg-red-900 hover:bg-red-800' : 'bg-blue-900 hover:bg-blue-800'} 
                    onOpenDetails={setSelectedRoom}
                  />
               </RevealOnScroll>
            ))}
          </div>
        </section>

        <section id="experience" className="py-24 bg-stone-100">
          <div className="container mx-auto px-4">
             <RevealOnScroll>
                <div className="text-center mb-16">
                   <h2 className="font-serif text-4xl text-stone-900 mb-4">A Experiência {activeProperty === 'uniao' ? 'União' : 'Cavaleiros'}</h2>
                   <p className="text-stone-600 max-w-2xl mx-auto">
                     {activeProperty === 'uniao' ? 'Charme, azulejos e história.' : 'Acessibilidade e conforto moderno.'}
                   </p>
                </div>
             </RevealOnScroll>
            <ExperienceSection activeProperty={activeProperty} />
          </div>
        </section>

        {/* COMBINED LOCATION & PARKING SECTION (Replaces old #explore and bottom #location) */}
        <section id="location" className="py-24 bg-white">
           <div className="container mx-auto px-4">
             <RevealOnScroll>
               <div className="text-center mb-16">
                 <h2 className="font-serif text-4xl text-stone-900 mb-4">Localização & Estacionamento</h2>
                 <p className="text-stone-600 max-w-2xl mx-auto">Tudo o que precisa de saber para chegar até nós.</p>
               </div>
               <LocationParkingSection />
             </RevealOnScroll>
           </div>
        </section>

        <section id="reviews" className="py-24 bg-stone-100">
           <div className="container mx-auto px-4">
             <RevealOnScroll>
               <div className="text-center mb-12">
                 <h2 className="font-serif text-3xl text-stone-900 mb-4">O Que Dizem os Hóspedes</h2>
               </div>
               <ReviewsSection />
             </RevealOnScroll>
           </div>
        </section>

      </main>

      {/* FOOTER */}
      <footer className="bg-stone-900 text-stone-300 py-16">
        <div className="container mx-auto px-4 grid grid-cols-1 md:grid-cols-4 gap-12 text-sm">
          <div>
            <h4 className="font-serif text-2xl text-white mb-6">Grupo União</h4>
            <p className="leading-relaxed mb-6">Tradição hoteleira no centro histórico de Tomar. Dois conceitos, a mesma hospitalidade.</p>
            <div className="flex space-x-4">
              <Instagram className="w-5 h-5 hover:text-white cursor-pointer" />
              <Facebook className="w-5 h-5 hover:text-white cursor-pointer" />
            </div>
          </div>
          <div>
            <h5 className="text-white font-medium mb-4">Contactos</h5>
            <ul className="space-y-2">
              <li className="flex items-center"><Phone className="w-4 h-4 mr-2"/> +351 249 323 161</li>
              <li className="hover:text-white cursor-pointer">reservas@uniaoguesthouse.com</li>
              <li className="mt-4 font-bold text-white">União Guest House</li>
              <li>Rua Serpa Pinto, 94, 2300-592 Tomar</li>
              <li className="mt-2 font-bold text-white">Hotel Cavaleiros</li>
              <li>Rua Alexandre Herculano, 7, 2300-554 Tomar</li>
            </ul>
          </div>
          <div>
            <h5 className="text-white font-medium mb-4">Explorar</h5>
            <ul className="space-y-2">
              <li><button onClick={() => setActiveProperty('uniao')} className="hover:text-white">União Guest House</button></li>
              <li><button onClick={() => setActiveProperty('cavaleiros')} className="hover:text-white">Hotel Cavaleiros</button></li>
              <li><a href="#location" className="hover:text-white">Localização</a></li>
            </ul>
          </div>
          <div>
            <button onClick={handleBookClick} className="w-full bg-white text-stone-900 py-3 font-medium hover:bg-stone-200 transition-colors">
              Reservar Estadia
            </button>
          </div>
        </div>
      </footer>

      {selectedRoom && (
        <RoomModal 
          room={selectedRoom} 
          onClose={() => setSelectedRoom(null)} 
          accentColor={activeProperty === 'uniao' ? 'bg-red-900 hover:bg-red-800' : 'bg-blue-900 hover:bg-blue-800'}
        />
      )}

      <div className="fixed bottom-0 left-0 w-full bg-white border-t border-stone-200 p-4 md:hidden z-50 flex justify-between items-center shadow-lg">
        <div className="flex flex-col">
          <span className="text-xs text-stone-500 uppercase">Melhor Preço Online</span>
          <span className="font-bold text-stone-900">Reserva Direta</span>
        </div>
        <button onClick={handleBookClick} className="bg-stone-900 text-white px-6 py-3 rounded-sm font-medium">
          Reservar
        </button>
      </div>
    </div>
  );
}